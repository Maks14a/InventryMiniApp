<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Iventry Album</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app-container">

    <header class="app-header">
      <div class="brand-block">
        <div class="brand-logo">üì∏</div>
        <div>
          <div class="brand-name">Iventry</div>
          <div id="topTitle" class="page-title">–ê–ª—å–±–æ–º—ã</div>
        </div>
      </div>
      <button id="topMenuBtn" class="btn glass header-btn hidden">‚öôÔ∏è</button>
    </header>

    <div id="guestBanner" class="hidden">
      –¢—ã –æ—Ç–∫—Ä—ã—Ç –∫–∞–∫ <b>–≥–æ—Å—Ç—å</b>. –î–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ç–∫—Ä–æ–π –≤ Telegram.
    </div>

    <main id="screenAlbums">
      <div class="section-label">–í–∞—à–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</div>
      <div id="albumsList"></div>
    </main>

    <main id="screenAlbum" class="hidden">
      <div class="nav-bar">
        <button id="backBtn" class="btn glass">‚Üê –ù–∞–∑–∞–¥</button>
        <div id="permBadge">...</div>
      </div>
      
      <div id="photoGrid"></div>

      <div class="bottom-toolbar glass">
        <div class="toolbar-grid">
          <button id="galleryBtn" class="btn toolbar-btn">üñº –ì–∞–ª–µ—Ä–µ—è</button>
          <button id="cameraBtn" class="btn toolbar-btn">üì∑ –ö–∞–º–µ—Ä–∞</button>
          <button id="shareBtnBottom" class="btn toolbar-btn">üì§ –ò–Ω—Ñ–æ</button>
        </div>
        <div id="uploadHint">–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä</div>
      </div>
    </main>

  </div>

  <div id="fullModal" class="modal-overlay">
    <div class="modal-card">
      <div class="fs-controls">
        <button id="fullZoom" class="btn icon-btn">üîç</button>
        <button id="fullDownload" class="btn icon-btn">‚¨áÔ∏è</button>
        <button id="fullDelete" class="btn icon-btn hidden">üóë</button>
        <button id="fullClose" class="btn icon-btn">‚úï</button>
      </div>

      <div id="fullViewer" style="width:100%; height:100%; overflow:hidden;">
        <div id="fullTrack"></div>
      </div>
      
      <div class="absolute bottom-4 w-full text-center text-xs opacity-50 pointer-events-none">
        –°–≤–∞–π–ø ‚Äî –ª–∏—Å—Ç–∞—Ç—å / –î–≤–æ–π–Ω–æ–π —Ç–∞–ø ‚Äî –∑—É–º
      </div>
    </div>
  </div>

  <div id="cameraModal" class="modal-overlay">
    <div class="modal-card relative">
      <div class="cam-overlay-top">
        <button id="camFlip" class="btn glass icon-btn">üîÑ</button>
        <button id="cameraClose" class="btn glass icon-btn">‚úï</button>
      </div>

      <video id="camVideo" playsinline autoplay muted></video>
      <canvas id="camCanvas"></canvas>

      <div class="cam-overlay-bottom">
        <button id="camFallback" class="btn glass" style="padding: 10px 20px; border-radius: 20px; font-size:12px;">üóÇ –§–∞–π–ª</button>
        <button id="camShot" class="btn"></button>
        <div style="width: 60px"></div> </div>
    </div>
  </div>

  <div id="shareModal" class="modal-overlay">
    <div class="modal-card glass">
      <div class="modal-header">
        <span>üì§ –î–æ—Å—Ç—É–ø</span>
        <button id="shareClose" class="close-circle btn">‚úï</button>
      </div>

      <div class="action-list">
        <label class="setting-row">
          <div class="setting-text">
            <strong>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ</strong>
            <span>–ì–æ—Å—Ç—å —Å–º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å</span>
          </div>
          <div>
            <input id="shareCanUpload" type="checkbox" checked>
            <span class="tg-switch"><span></span></span>
          </div>
        </label>

        <label class="setting-row">
          <div class="setting-text">
            <strong>–£–¥–∞–ª–µ–Ω–∏–µ</strong>
            <span>–ì–æ—Å—Ç—å —Å–º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å</span>
          </div>
          <div>
            <input id="shareCanDelete" type="checkbox">
            <span class="tg-switch"><span></span></span>
          </div>
        </label>
      </div>

      <div style="margin-top: 10px;">
        <div class="text-xs opacity-50 mb-1">–õ–∏–º–∏—Ç –æ—Ç–∫—Ä—ã—Ç–∏–π (0 = ‚àû)</div>
        <div class="flex gap-2">
          <input id="shareMaxUses" type="number" value="20">
          <button id="shareNoLimit" class="btn glass" style="width:50px; border-radius:12px;">‚àû</button>
        </div>
      </div>

      <div class="action-list" style="margin-top: 10px;">
        <button id="shareLinkBtn" class="btn action-btn bg-white/5">üîó –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        <button id="sharePersonBtn" class="btn action-btn bg-white/5">üë§ –í—ã–±—Ä–∞—Ç—å —á–µ–ª–æ–≤–µ–∫–∞</button>
      </div>
    </div>
  </div>

  <div id="manageModal" class="modal-overlay">
    <div class="modal-card glass">
      <div class="modal-header">
        <span>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        <button id="manageClose" class="close-circle btn">‚úï</button>
      </div>

      <div class="action-list">
        <button id="renameBtn" class="btn action-btn">‚úèÔ∏è –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</button>
        <button id="membersBtn" class="btn action-btn">üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
        <button id="leaveBtn" class="btn action-btn text-danger">üö™ –í—ã–π—Ç–∏</button>
        <button id="deleteAlbumBtn" class="btn action-btn text-danger">üóë –£–¥–∞–ª–∏—Ç—å –∞–ª—å–±–æ–º</button>
      </div>
      
      <div class="text-center text-xs opacity-30 mt-2">ID: ...</div>
    </div>
  </div>

  <div id="membersModal" class="modal-overlay">
    <div class="modal-card glass" style="max-height: 80vh; overflow-y:auto;">
      <div class="modal-header">
        <span>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</span>
        <button id="membersClose" class="close-circle btn">‚úï</button>
      </div>

      <div id="membersOwnerHint" class="text-xs opacity-50 p-2 bg-white/5 rounded"></div>
      <button id="leaveBtnInside" class="btn action-btn text-danger hidden mb-3">üö™ –í—ã–π—Ç–∏</button>

      <div id="membersAddBox">
        <div class="text-sm font-bold opacity-70 mb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ–≤—ã—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π</div>
        <div class="text-xs opacity-40 mb-2">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ —Å –ø—Ä–∞–≤–∞–º–∏.</div>
      </div>

      <div class="section-label mt-4">–°–ø–∏—Å–æ–∫</div>
      <div id="membersList" class="flex flex-col gap-2"></div>
    </div>
  </div>

  <div id="toast" class="hidden"></div>

  <script src="script.js"></script>
</body>
</html>